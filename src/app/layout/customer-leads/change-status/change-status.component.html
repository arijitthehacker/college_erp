<div class="modal-header">
  <h4 class="modal-title rfrf" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Update Status
  </h4>
</div>

<form>
  <div class="modal-body">

    <div class="row">
      <div class="col-md-12 form-group grfr mb-0">
        <div class="qwert bbbbb">
          <p class="statusName">Consent from Referee</p>
          <p class="copm" *ngIf="allData[0]?.status_data == 'APPROVED'">Completed</p>
          <!-- <div *ngIf="allData[0]?.status_data == 'PENDING'">
           <a >Completed</a>
           <a style="margin-left: 20px;">Reject</a>
          </div> -->
        </div>
        <div class="qwert bbbbb">
          <p class="statusName">Agent / Consultant Assignment</p>
          <p class="copm" *ngIf="allData[1]?.status_data == 'APPROVED'">Completed</p>
          <!-- <div *ngIf="allData[1]?.status_data == 'PENDING'">
           <a >Completed</a>
           <a style="margin-left: 20px;">Reject</a>
          </div> -->
        </div>
        <div class="qwert bbbbb qweqq" [ngClass]="{'approve':allData[2]?.status_data == 'APPROVED','rejcvv':allData[2]?.status_data == 'REJECTED'}">
          <p class="statusName">Lead Outreach</p>
          <div class="d-flex dessert" *ngIf="allData[2]?.status_data == 'APPROVED'">
            <p class="copm" >Completed</p>
            <div class="yuftr" *ngIf="allData[3]?.status_data == 'PENDING'">
              <p class="undo d-block mb-2 crs" (click)="undoStatus(2)">Undo</p>
              <p class="undo d-block m-0 crs" *ngIf="!allData[2]?.image" (click)="openModal(template,2,'APPROVED')">Add</p>
              <p class="undo d-block m-0 crs" *ngIf="allData[2]?.image" (click)="StatusRemoveImage(2)">Remove</p>
            </div>
          </div>
          <div class="kjhgfc" style="position: relative;">
            <img class="deimg" *ngIf="allData[2]?.image" [src]="allData[2]?.image" width="100px" height="100px" (click)="commonService.openLightBox(allData[2]?.image)" />
            <p class="mt-3" *ngIf="allData[2]?.description">{{allData[2]?.description}}</p>
            <!-- <p *ngIf="allData[2]?.image && allData[3]?.status_data == 'PENDING'" class="wedfecd" (click)="StatusRemoveImage(2)">x</p> -->
          </div>
          <div class="d-flex dessert " *ngIf="allData[2]?.status_data == 'REJECTED'">
            <div>
              <p style="color: #555151;font-size: 14px;">{{allData[2]?.reject_reason}}</p>
              <p class="rejectx" >Rejected</p>
            </div>
              <div class="yuftr">
                <p class="undo d-block mb-2 crs" (click)="undoStatus(2)">Undo</p>
              </div>
          </div>
          <div class="mb-3" *ngIf="allData[2]?.status_data == 'PENDING'">
            <a class="crs orangf decoration" (click)="openModal(template,2,'APPROVED')">Complete</a>
            <a class="crs decoration" (click)="openRejectModal(template1,2,'REJECTED')" style="margin-left: 20px;">Reject</a>
          </div>

        </div>
        <div class="qwert " [ngClass]="{'approve':allData[3]?.status_data == 'APPROVED','rejcvv':allData[3]?.status_data == 'REJECTED'}">
          <p class="statusName">Appointment / Sales Gallery Visit</p>
          <div class="d-flex dessert" *ngIf="allData[3]?.status_data == 'APPROVED'">
            <p class="copm" >Completed</p>
            <div class="yuftr" *ngIf="allData[4]?.status_data == 'PENDING'">
              <p class="undo d-block mb-2 crs" (click)="undoStatus(3)">Undo</p>
              <p class="undo d-block m-0 crs" *ngIf="!allData[3]?.image" (click)="openModal(template,3,'APPROVED')">Add</p>
              <p class="undo d-block m-0 crs" *ngIf="allData[3]?.image" (click)="StatusRemoveImage(3)">Remove</p>
            </div>
          </div>
          <div class="kjhgfc" style="position: relative;">
            <img class="deimg"  *ngIf="allData[3]?.image" [src]="allData[3]?.image" width="100px" height="100px" (click)="commonService.openLightBox(allData[3]?.image)" />
            <p class="mt-3" *ngIf="allData[3]?.description">{{allData[3]?.description}}</p>
            <!-- <p *ngIf="allData[3]?.image && allData[4]?.status_data == 'PENDING'" class="wedfecd" (click)="StatusRemoveImage(3)">x</p> -->
          </div>
          <div class="d-flex dessert" *ngIf="allData[3]?.status_data == 'REJECTED'">
            <div>
              <p style="color: #555151;font-size: 14px;">{{allData[3]?.reject_reason}}</p>
              <p class="rejectx" >Rejected</p>
            </div>
              <div class="yuftr">
                <p class="undo d-block mb-2 crs" (click)="undoStatus(3)">Undo</p>
              </div>
          </div>
          <div class="mb-3" *ngIf="allData[2]?.status_data == 'APPROVED' && allData[3]?.status_data == 'PENDING'">
            <a class="crs orangf decoration" (click)="openModal(template,3,'APPROVED')">Complete</a>
            <a class="crs decoration" (click)="openRejectModal(template1,3,'REJECTED')" style="margin-left: 20px;">Reject</a>
          </div>
        </div>
        <div class="qwert" [ngClass]="{'approve':allData[4]?.status_data == 'APPROVED','rejcvv':allData[4]?.status_data == 'REJECTED'}">
          <p class="statusName">Unit Booking</p>
          <div class="d-flex dessert" *ngIf="allData[4]?.status_data == 'APPROVED'">
            <p class="copm" >Completed</p>
            <div class="yuftr" *ngIf="allData[5]?.status_data == 'PENDING'">
              <p class="undo d-block mb-2 crs" (click)="undoStatus(4)">Undo</p>
              <p class="undo d-block m-0 crs" *ngIf="!allData[4]?.image" (click)="openModal(template,4,'APPROVED')">Add</p>
              <p class="undo d-block m-0 crs" *ngIf="allData[4]?.image" (click)="StatusRemoveImage(4)">Remove</p>
            </div>
          </div>
          <div class="kjhgfc" style="position: relative;">
            <img class="deimg"  *ngIf="allData[4]?.image" [src]="allData[4]?.image" width="100px" height="100px" (click)="commonService.openLightBox(allData[4]?.image)" />
            <p class="mt-3" *ngIf="allData[4]?.description">{{allData[4]?.description}}</p>
            <!-- <p *ngIf="allData[4]?.image && allData[5]?.status_data == 'PENDING'" class="wedfecd" (click)="StatusRemoveImage(4)">x</p> -->
          </div>
          <div class="d-flex dessert" *ngIf="allData[4]?.status_data == 'REJECTED'">
            <div>
              <p style="color: #555151;font-size: 14px;">{{allData[4]?.reject_reason}}</p>
              <p class="rejectx" >Rejected</p>
            </div>
              <div class="yuftr">
                <p class="undo d-block mb-2 crs" (click)="undoStatus(4)">Undo</p>
              </div>
          </div>
          <div class="mb-3" *ngIf="allData[3]?.status_data == 'APPROVED' && allData[4]?.status_data == 'PENDING'">
            <a class="crs orangf decoration" (click)="openModal(template,4,'APPROVED')">Complete</a>
            <a class="crs decoration" (click)="openRejectModal(template1,4,'REJECTED')" style="margin-left: 20px;">Reject</a>
          </div>
        </div>
        <div class="qwert" [ngClass]="{'approve':allData[5]?.status_data == 'APPROVED','rejcvv':allData[5]?.status_data == 'REJECTED'}">
          <p class="statusName">Loan Approval</p>
          <div class="d-flex dessert" *ngIf="allData[5]?.status_data == 'APPROVED'">
          <p class="copm" >Completed</p>
          <div class="yuftr" *ngIf="allData[6]?.status_data == 'PENDING'">
            <p class="undo d-block mb-2 crs" (click)="undoStatus(5)">Undo</p>
            <p class="undo d-block m-0 crs" *ngIf="!allData[5]?.image" (click)="openModal(template,5,'APPROVED')">Add</p>
            <p class="undo d-block m-0 crs" *ngIf="allData[5]?.image" (click)="StatusRemoveImage(5)">Remove</p>
          </div>
        </div>
        <div class="kjhgfc" style="position: relative;">
          <img class="deimg"  *ngIf="allData[5]?.image" [src]="allData[5]?.image" width="100px" height="100px" (click)="commonService.openLightBox(allData[5]?.image)"/>
          <p class="mt-3" *ngIf="allData[5]?.description">{{allData[5]?.description}}</p>
          <!-- <p *ngIf="allData[5]?.image && allData[6]?.status_data == 'PENDING'" class="wedfecd" (click)="StatusRemoveImage(5)">x</p> -->
        </div>
        <div class="d-flex dessert" *ngIf="allData[5]?.status_data == 'REJECTED'">
          <div>
            <p style="color: #555151;font-size: 14px;">{{allData[5]?.reject_reason}}</p>
            <p class="rejectx" >Rejected</p>
          </div>
            <div class="yuftr">
              <p class="undo d-block mb-2 crs" (click)="undoStatus(5)">Undo</p>
            </div>
        </div>
          <div class="mb-3" *ngIf="allData[4]?.status_data == 'APPROVED' && allData[5]?.status_data == 'PENDING'">
            <a class="crs orangf decoration" (click)="openModal(template,5,'APPROVED')">Complete</a>
            <a class="crs decoration" (click)="openRejectModal(template1,5,'REJECTED')" style="margin-left: 20px;">Reject</a>
          </div>
        </div>
        <div class="qwert" [ngClass]="{'approve':allData[6]?.status_data == 'APPROVED','rejcvv':allData[6]?.status_data == 'REJECTED'}">
          <p class="statusName">Signing of Sales & Purchase Agreement</p>
          <div class="d-flex dessert" *ngIf="allData[6]?.status_data == 'APPROVED'">
          <p class="copm" >Completed</p>
          <div class="yuftr" *ngIf="allData[7]?.status_data == 'PENDING'">
            <p class="undo d-block mb-2 crs" (click)="undoStatus(6)">Undo</p>
            <p class="undo d-block m-0 crs" *ngIf="!allData[6]?.image" (click)="openModal(template,6,'APPROVED')">Add</p>
            <p class="undo d-block m-0 crs" *ngIf="allData[6]?.image" (click)="StatusRemoveImage(6)">Remove</p>
          </div>
        </div>
        <div class="kjhgfc" style="position: relative;">
          <img class="deimg"  *ngIf="allData[6]?.image" [src]="allData[6]?.image" width="100px" height="100px" (click)="commonService.openLightBox(allData[6]?.image)" />
          <p class="mt-3" *ngIf="allData[6]?.description">{{allData[6]?.description}}</p>
          <!-- <p *ngIf="allData[6]?.image && allData[7]?.status_data == 'PENDING'" class="wedfecd" (click)="StatusRemoveImage(6)">x</p> -->
        </div>
        <div class="d-flex dessert" *ngIf="allData[6]?.status_data == 'REJECTED'">
          <div>
            <p style="color: #555151;font-size: 14px;">{{allData[6]?.reject_reason}}</p>
            <p class="rejectx" >Rejected</p>
          </div>
            <div class="yuftr">
              <p class="undo d-block mb-2 crs" (click)="undoStatus(6)">Undo</p>
            </div>
        </div>
          <div class="mb-3" *ngIf="allData[5]?.status_data == 'APPROVED' && allData[6]?.status_data == 'PENDING'">
            <a class="crs orangf decoration" (click)="openModal(template,6,'APPROVED')">Complete</a>
            <a class="crs decoration" (click)="openRejectModal(template1,6,'REJECTED')" style="margin-left: 20px;">Reject</a>
          </div>
        </div>
        <div class="qwert jgfg" [ngClass]="{'approve':allData[7]?.status_data == 'APPROVED','rejcvv':allData[7]?.status_data == 'REJECTED'}">
          <p class="statusName m-0">Referral Fees Payout</p>
          <div class="d-flex dessert" *ngIf="allData[7]?.status_data == 'APPROVED'">
          <p class="copm m-0 pohgfgh" >Completed</p>
          <!-- <p class="undo">Undo</p> -->
          </div>
          <div *ngIf="allData[7]?.status_data == 'PENDING' && allData[6]?.status_data == 'APPROVED'">
            <p class="m-0 pohgfgh">Pending</p>
            <!-- <a (click)="openModal(template,7,'APPROVED')">Complete</a>
            <a (click)="openRejectModal(template1,7,'REJECTED')" style="margin-left: 20px;">Reject</a> -->
          </div>
        </div>

      </div>
    </div>

  </div>

  <div class="modal-footer">
    <button (click)="closeModal()" type="button" class="btn-cancel mr-3">Close</button>
    <!-- <button type="submit" class="btn btn-blue-outline">Submit</button> -->
  </div>
</form>



<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Submit Proof</h4>
    <!-- <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button> -->
  </div>
  <form [formGroup]="form">
    <div class="modal-body mypersonalmodal">
      <h5 class="mb-3">Upload Image</h5>
      <div class="col-md-12 form-group">
        <div class="product-images">
          <input type="file" class="file-upload" id="image" formControlName="image"
            accept="image/jpg, image/jpeg, image/png" (change)="selectImage($event, 'image')">
          <label for="image">
            <img src="/assets/images/ic_camera.png">
          </label>
          <img class="ml-4 uploaded-img" height="72" for="image" [src]="imageValue" *ngIf='form?.value?.image'>
          <i class="fa fa-times-circle fa-trash-css rr" (click)="removeImage('image')" *ngIf='form?.value?.image'></i>
        </div>
        <div  class="text-error"
             *ngIf="form.controls['image'].errors?.required && showError">
          Please select image.
        </div>
      </div>

      <h5 class="mb-4">Add Notes </h5>

      <div class="col-md-12 form-group">

        <textarea class="form-control w-100" formControlName="description" trim="blur" type="text"
          placeholder="Write notes here ...."></textarea>
      </div>



      <div class="modal-footer p-0">
        <button (click)="hideCustomModal()" type="button" class="btn-cancel mr-3">Cancel</button>
        <button (click)="submit()" type="submit" class="btn btn-blue-outline m-0">Submit</button>
      </div>
    </div>
  </form>
</ng-template>



<ng-template #template1>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Reject Reason</h4>
    <!-- <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="modalRef?.hide()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button> -->
  </div>
  <form [formGroup]="form">
    <div class="modal-body mypersonalmodal">

      <h5 class="mb-4">Choose Reject Reason </h5>
      <div class="nkjbgy">
        <div class="">
          <div *ngFor="let data of customRejected;let i = index;" (click)="selectedReason(i)">
            <div class="radio m-0" >
              <input id="radio-{{i}}" name="radio" type="radio" [checked]="i == 0">
              <label for="radio-{{i}}" class="radio-label">{{data?.name}}</label>
            </div>
          </div>
          <div (click)="OtherReason()">
            <div class="radio m-0" >
              <input id="radio" name="radio" type="radio" >
              <label for="radio" class="radio-label">Other</label>
            </div>
          </div>
        </div>
        
      </div>

      <div *ngIf="customReason" class="col-md-12 form-group">

        <textarea class="form-control w-100" formControlName="reject_reason" trim="blur" type="text"
          placeholder="Write here ....."></textarea>
          <div  class="text-error"
             *ngIf="form.controls['reject_reason'].errors?.required && showError">
             Please enter reason.
     </div>
      </div>



      <div class="modal-footer p-0">
        <button (click)="hideCustomModal()" type="button" class="btn-cancel mr-3">Cancel</button>
        <button (click)="submit()" type="submit" class="btn btn-blue-outline m-0">Submit</button>
      </div>
    </div>
  </form>
</ng-template>